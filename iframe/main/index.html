<!doctype html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8" />
		<title>Ace Editor - EDA</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			html,
			body {
				height: 100%;
				overflow: hidden;
				background: #272822; /* 与编辑器背景一致 */
			}

			#app {
				display: flex;
				height: 100vh;
			}

			/* 左侧可滚动侧边栏 */
			#sidebar {
				width: 120px;
				background: #272822; /* Monokai 背景色 */
				color: white;
				display: flex;
				flex-direction: column;
				align-items: center;
				padding-top: 16px;
				border-right: 1px solid #444;
				overflow-y: auto; /* 允许垂直滚动 */
				scrollbar-width: thin; /* Firefox */
				scrollbar-color: #555 #272822;
			}

			/* 隐藏默认滚动条（可选美化） */
			#sidebar::-webkit-scrollbar {
				width: 6px;
			}
			#sidebar::-webkit-scrollbar-track {
				background: #272822;
			}
			#sidebar::-webkit-scrollbar-thumb {
				background: #555;
				border-radius: 3px;
			}

			/* 列表项样式 */
			#sidebar ul {
				list-style: none;
				width: 100%;
				padding: 0;
			}

			#sidebar li {
				width: 100%;
				display: flex;
				justify-content: center;
				padding: 8px 0;
			}

			#sidebar button {
				width: 80px;
				height: 36px;
				background: #272822; /* 与背景融合 */
				color: white; /* 文字白色 */
				border: 1px solid #666;
				border-radius: 4px;
				font-size: 14px;
				cursor: pointer;
				transition:
					background 0.2s,
					border-color 0.2s;
			}

			#sidebar button:hover {
				background: #333430;
				border-color: #888;
			}

			/* 右侧编辑器区域 */
			#editor-container {
				flex: 1;
				height: 100%;
			}

			#editor {
				height: 100%;
				width: 100%;
			}
		</style>
	</head>
	<body>
		<div id="app">
			<!-- 左侧可滚动侧边栏 -->
			<div id="sidebar">
				<ul>
					<li><button id="run-btn">运行</button></li>
					<!-- 后续可在此添加更多 <li><button>...</button></li> -->
				</ul>
			</div>

			<!-- 右侧编辑器 -->
			<div id="editor-container">
				<div id="editor"></div>
			</div>
		</div>

		<!-- Ace 资源（全静态加载） -->
		<script src="/iframe/script/Ace_Editor/ace.js"></script>
		<script src="/iframe/script/Ace_Editor/ext-language_tools.js"></script>
		<script src="/iframe/script/Ace_Editor/mode-javascript.js"></script>
		<script src="/iframe/script/Ace_Editor/theme-monokai.js"></script>

		<script>
			// 初始化 Ace 编辑器（空内容）
			const editor = ace.edit('editor');
			editor.session.setMode('ace/mode/javascript');
			editor.setTheme('ace/theme/monokai');
			editor.setValue('', -1); // 清空内容，光标置于开头
			editor.setOptions({
				enableBasicAutocompletion: true,
				enableLiveAutocompletion: true,
				fontSize: 14,
				useWorker: false,
				highlightActiveLine: true,
				showPrintMargin: false,
			});

			// 绑定“运行”按钮
			document.getElementById('run-btn').addEventListener('click', () => {
				const code = editor.getValue().trim();
				if (!code) {
					console.log('编辑器为空，未执行任何代码。');
					return;
				}

				try {
					eval(code);
				} catch (error) {
					console.error('❌ 执行出错:', error);
				}
			});
		</script>
	</body>
</html>
