<!doctype html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8" />
		<title>Ace Editor - EDA</title>
		<link rel="stylesheet" href="/iframe/style/body.css" />
	</head>
	<body>
		<div id="app">
			<!-- 左侧可滚动侧边栏 -->
			<div id="sidebar">
				<ul>
					<li><button id="run-btn">运行</button></li>
					<!-- 后续可在此添加更多 <li><button>...</button></li> -->
				</ul>
			</div>

			<!-- 右侧编辑器 -->
			<div id="editor-container">
				<div id="editor"></div>
			</div>
		</div>

		<!-- Ace 资源（全静态加载） -->
		<script src="/iframe/script/Ace_Editor/ace.js"></script>
		<script src="/iframe/script/Ace_Editor/ext-language_tools.js"></script>
		<script src="/iframe/script/Ace_Editor/mode-javascript.js"></script>
		<script src="/iframe/script/Ace_Editor/theme-monokai.js"></script>

		<script src="/iframe/script/eda_coder/eda_all_method.js"></script>

		<script>
			// // 初始化 Ace 编辑器（空内容）
			// const editor = ace.edit('editor');
			// editor.session.setMode('ace/mode/javascript');
			// editor.setTheme('ace/theme/monokai');
			// editor.setValue('', -1); // 清空内容，光标置于开头
			// editor.setOptions({
			// 	enableBasicAutocompletion: true,	//自动弹出
			// 	enableLiveAutocompletion: true,
			// 	fontSize: 14,
			// 	useWorker: false,
			// 	highlightActiveLine: true,
			// 	showPrintMargin: false,
			// });

			editor.completers.push({
				getCompletions: function (editor, session, pos, prefix, callback) {
					var completions = [
						{
							name: 'myFunction',
							value: 'myFunction',
							score: 1000,
							meta: 'custom',
							docText: '测试补全',
						},
					];
					callback(null, completions);
				},
			});

			// 绑定“运行”按钮
			document.getElementById('run-btn').addEventListener('click', () => {
				const code = editor.getValue().trim();
				if (!code) {
					console.log('编辑器为空，未执行任何代码。');
					return;
				}
				try {
					eval(code);
				} catch (error) {
					console.error('❌ 执行出错:', error);
				}
			});
		</script>
	</body>
</html>
